services:
  l2msg:
    build:
      context: .
      dockerfile: Dockerfile
    networks:
      - virtual_network
    devices:
      - "/dev/net/tun"  
    entrypoint: ["python", "/network_config.py"]  # Execute network config script
    privileged: true  # Allow container to access network devices

networks:
  virtual_network:
    driver: bridge
